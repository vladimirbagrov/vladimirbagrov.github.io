<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<title>Lab7_3</title>
</head>

<body>
	<div> </div>

	<script>
		'use strict';
		let text;
		document.addEventListener('keydown', function (event) {
			if (event.code == 'KeyE' && (event.ctrlKey || event.metaKey)) {
				event.preventDefault();
				let textarea = document.createElement("textarea");
				let div = document.querySelector("div");
				text = div.innerHTML;
				textarea.value = div.innerHTML;
				div.parentNode.replaceChild(textarea, div);
				textarea.focus();
			}
			else if (event.code == 'KeyS' && (event.ctrlKey || event.metaKey)) {
				event.preventDefault();
				let textarea = document.querySelector("textarea");
				let div = document.createElement("div");
				if (textarea === null) {
					console.log("Нечего сохранять!!!");
				}
				else {
					div.innerHTML = textarea.value;
					textarea.parentNode.replaceChild(div, textarea);
				}
			}
			else if (event.code == 'Escape') {
				event.preventDefault();
				let textarea = document.querySelector("textarea");
				let div = document.createElement("div");
				if (textarea) {
					div.innerHTML = text;
					textarea.parentNode.replaceChild(div, textarea);
				}
			}
		});

	</script>
</body>

</html>